<!DOCTYPE html>
<html lang="ko" data-mode="admin">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KUWOTECH 영업관리 시스템 - 관리자모드</title>

    <!-- ✅ [섹션: 즉시 실행 브레이크포인트 스크립트] CSS 로드 전에 실행 -->
    <script>
      (function() {
        const width = window.innerWidth;
        let bp;

        if (width < 640) bp = 'xs';
        else if (width < 768) bp = 'sm';
        else if (width < 1024) bp = 'md';
        else if (width < 1280) bp = 'lg';
        else if (width < 1536) bp = 'xl';
        else bp = '2xl';

        document.documentElement.dataset.breakpoint = bp;
        document.documentElement.classList.add('breakpoint-' + bp);

        // CRITICAL: document.body null 가드 (head에서 실행되므로 body가 아직 파싱 안 됐을 수 있음)
        if (document.body) {
          document.body.classList.add('breakpoint-' + bp);
        } else {
          // body 파싱 후 실행
          document.addEventListener('DOMContentLoaded', function() {
            document.body.classList.add('breakpoint-' + bp);
          });
        }

        // 브레이크포인트 설정 완료: ${bp} (${window.innerWidth}px)
      })();
    </script>

    <!-- [섹션: 공통 스타일] -->
    <link rel="stylesheet" href="../../07.styles/00_root.css" />
    <link rel="stylesheet" href="../../07.styles/01_variables.css" />
    <link rel="stylesheet" href="../../07.styles/09_fonts.css" />
    <link rel="stylesheet" href="../../07.styles/07_theme_colors.css" />
    <link rel="stylesheet" href="../../07.styles/03_glassmorphism.css" />
    <link rel="stylesheet" href="../../07.styles/02_common.css" />
    <link rel="stylesheet" href="./03_admin_theme.css" />

    <!-- [섹션: 외부 라이브러리] -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/idb@7.1.1/build/umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- ✅ [섹션: 메인 스크립트] defer로 DOM 준비 후 실행 -->
    <script type="module" defer src="./02_admin_layout.js"></script>
  </head>
  <body class="theme-admin" data-mode="admin">
    <!-- [섹션: 로딩 오버레이] -->
    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="loading-spinner"></div>
      <div class="loading-text">처리 중...</div>
    </div>

    <!-- [섹션: 헤더] -->
    <header id="main-header" class="admin-header glass-effect">
      <div class="header-left">
        <!-- ✅ 햄버거 메뉴 버튼 (모바일 전용) -->
        <button id="mobile-menu-toggle" class="mobile-menu-btn" aria-label="메뉴 열기">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>

        <div id="header-logo-container">
          <!-- 로고는 JavaScript 공통 함수(createLogoElement)로 동적 생성됨 -->
        </div>
        <h1 class="system-title">영업관리 시스템 - 관리자모드</h1>
      </div>

      <div class="header-right">
        <div class="user-info glass-effect-light">
          <span id="user-greeting" class="user-greeting"></span>
        </div>
        <button id="logout-btn" class="btn-logout" onclick="window.handleLogoutClick()">로그아웃</button>
        <div id="current-time" class="clock"></div>
      </div>
    </header>

    <!-- [섹션: 메인 컨테이너] -->
    <div class="main-container">
      <!-- ✅ 사이드바 오버레이 (모바일 전용) -->
      <div id="sidebar-overlay" class="sidebar-overlay"></div>

      <!-- [섹션: 사이드바] -->
      <aside id="sidebar" class="admin-sidebar glass-effect">
        <nav class="sidebar-nav">
          <ul class="menu-list">
            <li class="menu-item glass-hover active" data-page="dashboard">
              <i class="icon">📊</i>
              <span>대시보드</span>
            </li>
            <li class="menu-item glass-hover" data-page="all-companies">
              <i class="icon">🏢</i>
              <span>전체거래처 관리</span>
            </li>
            <li class="menu-item glass-hover" data-page="report-confirm">
              <i class="icon">✅</i>
              <span>실적보고서 확인</span>
            </li>
            <li class="menu-item glass-hover" data-page="presentation">
              <i class="icon">📺</i>
              <span>보고서 발표</span>
            </li>
            <li class="menu-item glass-hover" data-page="data-management">
              <i class="icon">💾</i>
              <span>데이터 관리</span>
            </li>
            <li class="menu-item glass-hover" data-page="employee-management">
              <i class="icon">👥</i>
              <span>직원 관리</span>
            </li>
            <li class="menu-item glass-hover" data-page="system-settings">
              <i class="icon">⚙️</i>
              <span>시스템 설정</span>
            </li>
            <!-- 강정환 관리자 전용 메뉴 -->
            <li class="menu-divider"></li>
            <li class="menu-item glass-hover special-menu hidden" data-page="excel-upload" id="excel-upload-menu">
              <i class="icon">📤</i>
              <span>엑셀 업로드</span>
            </li>
          </ul>
        </nav>
      </aside>

      <!-- [섹션: 콘텐츠 영역] -->
      <main id="main-content" class="admin-content">
        <!-- 동적 로드 영역 -->
        <div class="loading-container">
          <div class="loading-spinner"></div>
          <p>페이지를 불러오는 중...</p>
        </div>
      </main>
    </div>

    <!-- [섹션: 토스트 컨테이너] -->
    <div id="toast-container"></div>

    <!-- [섹션: 모달 컨테이너] -->
    <div id="modal-container"></div>

    <!-- ✅ 스크립트는 head로 이동됨 (defer 속성 사용) -->
  </body>
</html>
