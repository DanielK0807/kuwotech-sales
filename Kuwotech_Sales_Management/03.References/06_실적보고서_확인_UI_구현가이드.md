# 실적보고서 확인 UI 구현 가이드

**프로젝트**: KUWOTECH 영업관리시스템
**작성일**: 2025-10-08
**대상 화면**: 영업담당/관리자 - 실적보고서 확인
**목적**: 실적보고서 확인 화면의 구체적인 구현 방법 가이드 (아코디언 방식)

---

## 📋 목차

1. [화면 레이아웃 구조](#1-화면-레이아웃-구조)
2. [HTML 구조 설계](#2-html-구조-설계)
3. [CSS 스타일링 가이드](#3-css-스타일링-가이드)
4. [JavaScript 인터랙션](#4-javascript-인터랙션)
5. [아코디언 확장 메커니즘](#5-아코디언-확장-메커니즘)
6. [누적 데이터 처리](#6-누적-데이터-처리)
7. [반응형 디자인](#7-반응형-디자인)
8. [접근성 고려사항](#8-접근성-고려사항)

---

## 1. 화면 레이아웃 구조

### 1-1. 전체 레이아웃 구성도 (아코디언 방식)

```
┌─────────────────────────────────────────────────────────────┐
│ Header (고정)                                                │
│ - 타이틀: 실적보고서 확인                                    │
│ - 우측: 새로고침 버튼                                        │
├─────────────────────────────────────────────────────────────┤
│ Summary Cards (고정)                                         │
│ - 전체, 완료, 일부완료, 미완료 통계                         │
├─────────────────────────────────────────────────────────────┤
│ Search Filters (고정)                                        │
│ - 보고서 유형, 상태 (완료/일부완료/미완료)                  │
├─────────────────────────────────────────────────────────────┤
│ Report List (스크롤 가능) ⬅ 1단계                          │
│ ┌───────────────────────────────────────────────────────┐   │
│ │ 보고서 항목 1                          [상세보기 ▼]  │   │
│ ├───────────────────────────────────────────────────────┤   │
│ │ ▼ 확장된 상세 내용 (아코디언) ⬅ 2단계              │   │
│ │ ┌─────────────────────────────────────────────────┐ │   │
│ │ │ 📋 보고서 기본 정보                            │ │   │
│ │ │   - 제출일, 확정일(누적)                       │ │   │
│ │ ├─────────────────────────────────────────────────┤ │   │
│ │ │ 💰 목표수금금액                                │ │   │
│ │ │   - 작성 내용 표시                             │ │   │
│ │ │   - [➕ 추가] 실적 입력                        │ │   │
│ │ │   - 누적 실적 표시                             │ │   │
│ │ ├─────────────────────────────────────────────────┤ │   │
│ │ │ 💵 목표매출액                                  │ │   │
│ │ │   - 제품별 작성 내용                           │ │   │
│ │ │   - [➕ 추가] 제품별 실적 입력                 │ │   │
│ │ │   - 제품별 누적 실적                           │ │   │
│ │ ├─────────────────────────────────────────────────┤ │   │
│ │ │ 📝 영업활동                                    │ │   │
│ │ │   - 활동별 작성 내용                           │ │   │
│ │ │   - [➕ 추가] 활동 확인                        │ │   │
│ │ │   - 확인된 활동 목록                           │ │   │
│ │ ├─────────────────────────────────────────────────┤ │   │
│ │ │ 📊 확인 요약                                   │ │   │
│ │ │ [💾 저장하기]                                 │ │   │
│ │ └─────────────────────────────────────────────────┘ │   │
│ └───────────────────────────────────────────────────────┘   │
│ ┌───────────────────────────────────────────────────────┐   │
│ │ 보고서 항목 2                          [상세보기 ▶]  │   │
│ └───────────────────────────────────────────────────────┘   │
│ ┌───────────────────────────────────────────────────────┐   │
│ │ 보고서 항목 3                          [상세보기 ▶]  │   │
│ └───────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 1-2. 화면 영역 비율

```
┌─────────────────┐
│ Header: 60px    │ (고정)
├─────────────────┤
│ Summary: 100px  │ (고정)
├─────────────────┤
│ Filters: 60px   │ (고정)
├─────────────────┤
│                 │
│ List:           │ (스크롤)
│ calc(100vh -    │ - 1단계 항목들
│ 220px)          │ - 2단계 확장 영역
│                 │   (동적 높이)
│                 │
└─────────────────┘
```

---

## 2. HTML 구조 설계

### 2-1. 전체 컨테이너 구조

```html
<!-- 메인 컨테이너 -->
<div class="report-confirm-container">
  <!-- 헤더 -->
  <header class="page-header bg-layer-1 glass-panel">
    <div class="header-content">
      <div class="header-text">
        <h1>실적보고서 확인</h1>
        <p class="subtitle">제출된 보고서를 확인하고 실적을 등록하세요</p>
      </div>
      <button id="btnRefresh" class="btn-refresh glass-button">
        🔄 새로고침
      </button>
    </div>
  </header>

  <!-- 통계 요약 -->
  <section class="summary-cards">
    <div class="summary-card glass-card">
      <div class="card-icon">📊</div>
      <div class="card-content">
        <div class="card-value" id="totalCount">45</div>
        <div class="card-label">전체</div>
      </div>
    </div>
    <div class="summary-card glass-card">
      <div class="card-icon">✅</div>
      <div class="card-content">
        <div class="card-value" id="completedCount">30</div>
        <div class="card-label">완료</div>
      </div>
    </div>
    <div class="summary-card glass-card">
      <div class="card-icon">🔄</div>
      <div class="card-content">
        <div class="card-value" id="partialCount">10</div>
        <div class="card-label">일부완료</div>
      </div>
    </div>
    <div class="summary-card glass-card">
      <div class="card-icon">❌</div>
      <div class="card-content">
        <div class="card-value" id="incompleteCount">5</div>
        <div class="card-label">미완료</div>
      </div>
    </div>
  </section>

  <!-- 검색 필터 -->
  <section class="search-filters glass-card">
    <div class="filter-group">
      <label>보고서 유형:</label>
      <select id="filterType" class="glass-input">
        <option value="">전체</option>
        <option value="weekly">주간</option>
        <option value="monthly">월간</option>
        <option value="annual">연간</option>
      </select>
    </div>
    <div class="filter-group">
      <label>상태:</label>
      <select id="filterStatus" class="glass-input">
        <option value="">전체</option>
        <option value="completed">완료</option>
        <option value="partial">일부완료</option>
        <option value="incomplete">미완료</option>
      </select>
    </div>
    <button id="btnSearch" class="btn-search glass-button">
      🔍 검색하기
    </button>
  </section>

  <!-- 보고서 목록 (1단계) -->
  <section class="report-list" id="reportList">
    <!-- JavaScript로 동적 생성됨 -->
  </section>
</div>
```

### 2-2. 보고서 항목 템플릿 (1단계 + 2단계 통합)

```html
<template id="report-item-template">
  <!-- 1단계: 보고서 목록 항목 -->
  <div class="report-item glass-card" data-report-id="">
    <!-- 1단계 헤더 (항상 표시) -->
    <div class="report-header">
      <div class="report-basic-info">
        <div class="info-row">
          <span class="info-label">보고서 ID:</span>
          <span class="info-value report-id"></span>
        </div>
        <div class="info-row">
          <span class="info-label">유형:</span>
          <span class="info-value report-type"></span>
        </div>
        <div class="info-row">
          <span class="info-label">제출일:</span>
          <span class="info-value submit-date"></span>
        </div>
        <div class="info-row">
          <span class="info-label">완료일:</span>
          <div class="info-value complete-dates">
            <!-- 여러 완료일이 누적 표시됨 -->
          </div>
        </div>
        <div class="info-row">
          <span class="info-label">상태:</span>
          <span class="info-value status-badge"></span>
        </div>
      </div>
      <button class="btn-toggle-detail glass-button" aria-label="상세보기">
        상세보기 <span class="toggle-icon">▼</span>
      </button>
    </div>

    <!-- 2단계: 상세 확인 영역 (아코디언) -->
    <div class="report-detail" style="display: none;">
      <!-- 보고서 상세 정보 -->
      <div class="detail-section glass-card">
        <h3 class="section-title">📋 보고서 기본 정보</h3>
        <div class="detail-content">
          <div class="detail-row">
            <span class="detail-label">보고서 ID:</span>
            <span class="detail-value detail-report-id"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">유형:</span>
            <span class="detail-value detail-report-type"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">거래처:</span>
            <span class="detail-value detail-company"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">작성자:</span>
            <span class="detail-value detail-employee"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">📅 제출일:</span>
            <span class="detail-value detail-submit-date"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">✅ 확정일:</span>
            <div class="detail-value detail-complete-dates">
              <!-- 누적된 확정일들 표시 -->
            </div>
          </div>
          <div class="detail-row">
            <span class="detail-label">현재 상태:</span>
            <span class="detail-value detail-status"></span>
          </div>
        </div>
      </div>

      <!-- 목표수금금액 섹션 -->
      <div class="detail-section glass-card collection-section" style="display: none;">
        <h3 class="section-title">💰 목표수금금액</h3>

        <!-- 작성 내용 표시 -->
        <div class="written-content glass-card">
          <h4 class="content-subtitle">📝 보고서 작성 내용:</h4>
          <div class="content-info">
            <div class="info-item">
              <span>계획 수금액:</span>
              <strong class="written-collection-amount"></strong>원
            </div>
            <div class="info-item">
              <span>예정일:</span>
              <strong class="written-collection-date"></strong>
            </div>
          </div>
        </div>

        <!-- 실적금액 입력 -->
        <div class="actual-input glass-card">
          <h4 class="content-subtitle">✏️ 실적금액 입력:</h4>
          <div class="input-group">
            <div class="form-field">
              <label>실적금액 (원):</label>
              <input type="number" class="glass-input actual-collection-amount" placeholder="0">
            </div>
            <div class="form-field">
              <label>수금일:</label>
              <input type="date" class="glass-input actual-collection-date">
            </div>
            <button class="btn-add-actual glass-button">
              ➕ 추가
            </button>
          </div>
        </div>

        <!-- 입력된 실적 (누적) -->
        <div class="actual-list glass-card">
          <h4 class="content-subtitle">✅ 입력된 실적 (누적):</h4>
          <div class="actual-items">
            <!-- 동적으로 추가됨 -->
            <!-- 예시:
            <div class="actual-item">
              <span>2025-01-28: 1,500,000원</span>
              <span class="confirmed-date">(확정일: 01-28 13:20)</span>
            </div>
            -->
          </div>
          <div class="actual-summary">
            <div class="summary-item">
              <span>누적 실적:</span>
              <strong class="total-collection-actual">0</strong>원
            </div>
            <div class="summary-item">
              <span>달성률:</span>
              <strong class="collection-achievement-rate">0</strong>%
            </div>
          </div>
        </div>

        <div class="section-status">
          확인 상태: <span class="collection-status-badge">미확인</span>
        </div>
      </div>

      <!-- 목표매출액 섹션 -->
      <div class="detail-section glass-card sales-section" style="display: none;">
        <h3 class="section-title">💵 목표매출액</h3>

        <!-- 작성 내용 표시 -->
        <div class="written-content glass-card">
          <h4 class="content-subtitle">📝 보고서 작성 내용:</h4>
          <div class="product-written-list">
            <!-- 제품별 계획 내용 동적 표시 -->
          </div>
        </div>

        <!-- 실적금액 입력 -->
        <div class="actual-input glass-card">
          <h4 class="content-subtitle">✏️ 실적금액 입력:</h4>
          <div class="input-group">
            <div class="form-field">
              <label>제품 선택:</label>
              <select class="glass-input product-select">
                <option value="">선택하세요</option>
                <!-- 동적으로 제품 옵션 생성 -->
              </select>
            </div>
            <div class="form-field">
              <label>실적금액 (원):</label>
              <input type="number" class="glass-input actual-sales-amount" placeholder="0">
            </div>
            <div class="form-field">
              <label>매출일:</label>
              <input type="date" class="glass-input actual-sales-date">
            </div>
            <div class="form-field">
              <label>
                <input type="checkbox" class="vat-included"> VAT 포함
              </label>
              <small>(체크 시 ÷1.1 자동계산)</small>
            </div>
            <button class="btn-add-sales-actual glass-button">
              ➕ 추가
            </button>
          </div>
        </div>

        <!-- 입력된 실적 (제품별 누적) -->
        <div class="actual-list glass-card">
          <h4 class="content-subtitle">✅ 입력된 실적 (누적):</h4>
          <div class="product-actual-list">
            <!-- 제품별 누적 실적 동적 표시 -->
          </div>
        </div>

        <div class="section-status">
          확인 상태: <span class="sales-status-badge">미확인</span>
        </div>
      </div>

      <!-- 영업활동 섹션 -->
      <div class="detail-section glass-card activity-section" style="display: none;">
        <h3 class="section-title">📝 영업활동(특이사항)</h3>

        <!-- 작성 내용 표시 -->
        <div class="written-content glass-card">
          <h4 class="content-subtitle">📝 보고서 작성 내용:</h4>
          <div class="activity-written-list">
            <!-- 활동별 작성 내용 동적 표시 -->
          </div>
        </div>

        <!-- 활동 실행 여부 확인 -->
        <div class="actual-input glass-card">
          <h4 class="content-subtitle">✏️ 활동 실행 여부 확인:</h4>
          <div class="input-group">
            <div class="form-field">
              <label>활동 선택:</label>
              <select class="glass-input activity-select">
                <option value="">선택하세요</option>
                <!-- 동적으로 활동 옵션 생성 -->
              </select>
            </div>
            <div class="form-field">
              <label>실행 여부:</label>
              <div class="radio-group">
                <label>
                  <input type="radio" name="activity-executed" value="yes"> 실행함
                </label>
                <label>
                  <input type="radio" name="activity-executed" value="no"> 실행 안함
                </label>
              </div>
            </div>
            <div class="form-field execution-content-field" style="display: none;">
              <label>실행 내용: (15자 이상 필수)</label>
              <textarea class="glass-input execution-content" rows="4" placeholder="실행 내용을 입력하세요"></textarea>
              <div class="char-counter">
                현재 글자수: <span class="char-count">0</span>자
                <span class="char-status">❌ (15자 이상 필요)</span>
              </div>
            </div>
            <button class="btn-add-activity-actual glass-button">
              ➕ 추가
            </button>
          </div>
        </div>

        <!-- 확인된 활동 (누적) -->
        <div class="actual-list glass-card">
          <h4 class="content-subtitle">✅ 확인된 활동 (누적):</h4>
          <div class="activity-actual-list">
            <!-- 확인된 활동 동적 표시 -->
          </div>
        </div>

        <div class="section-status">
          확인 상태: <span class="activity-status-badge">미확인</span>
        </div>
      </div>

      <!-- 확인 요약 -->
      <div class="detail-section glass-card summary-section">
        <h3 class="section-title">📊 확인 요약</h3>
        <div class="summary-content">
          <div class="summary-row">
            <span>수금 확인:</span>
            <span class="summary-value collection-summary">0/0 완료 (0%)</span>
          </div>
          <div class="summary-row">
            <span>매출 확인:</span>
            <span class="summary-value sales-summary">0/0 완료 (0%)</span>
          </div>
          <div class="summary-row">
            <span>활동 확인:</span>
            <span class="summary-value activity-summary">0/0 완료 (0%)</span>
          </div>
          <div class="summary-row total">
            <span>전체 확인률:</span>
            <strong class="summary-value total-completion">0%</strong> →
            <span class="final-status-badge">미완료</span>
          </div>
        </div>
      </div>

      <!-- 액션 버튼 -->
      <div class="detail-actions">
        <button class="btn-save glass-button primary">
          💾 저장하기
        </button>
      </div>
    </div>
  </div>
</template>
```

---

## 3. CSS 스타일링 가이드

### 3-1. 컨테이너 및 헤더 스타일

```css
/* 메인 컨테이너 */
.report-confirm-container {
  padding: 0 5px;
  width: 100%;
  margin: 0 auto;
  min-height: 100vh;
}

/* 헤더 */
.page-header {
  position: sticky;
  top: 0;
  z-index: 1000;
  padding: var(--spacing-xl) 0;
  margin-bottom: var(--spacing-2xl);
  background: rgba(15, 42, 29, 0.98);
  backdrop-filter: blur(20px) saturate(180%);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  border-radius: 16px;
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 95%;
  margin: 0 auto;
}

.btn-refresh {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  font-size: var(--font-md);
  font-weight: var(--font-weight-medium);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-lg);
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-on-layer-1);
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-refresh:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.4);
  transform: translateY(-2px);
}
```

### 3-2. 통계 카드 스타일

```css
/* 통계 요약 카드 */
.summary-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-2xl);
  width: 95%;
  margin-left: auto;
  margin-right: auto;
}

.summary-card {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-xl);
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.summary-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.card-icon {
  font-size: 48px;
  line-height: 1;
}

.card-content {
  flex: 1;
}

.card-value {
  font-size: var(--font-3xl);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  line-height: 1;
  margin-bottom: var(--spacing-xs);
}

.card-label {
  font-size: var(--font-sm);
  color: var(--text-secondary);
  font-weight: var(--font-weight-medium);
}
```

### 3-3. 검색 필터 스타일

```css
/* 검색 필터 */
.search-filters {
  display: flex;
  align-items: center;
  gap: var(--spacing-lg);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
  width: 95%;
  margin-left: auto;
  margin-right: auto;
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  border-radius: var(--radius-lg);
}

.filter-group {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.filter-group label {
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  white-space: nowrap;
}

.filter-group select {
  min-width: 150px;
}

.btn-search {
  margin-left: auto;
  padding: var(--spacing-md) var(--spacing-xl);
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-lg);
  font-weight: var(--font-weight-bold);
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-search:hover {
  background: var(--color-primary-dark);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
}
```

### 3-4. 보고서 목록 스타일 (1단계)

```css
/* 보고서 목록 */
.report-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
  width: 95%;
  margin: 0 auto var(--spacing-2xl);
}

/* 보고서 항목 */
.report-item {
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  transition: all 0.3s ease;
}

.report-item:hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

/* 보고서 헤더 (1단계 - 항상 표시) */
.report-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--spacing-xl);
  background: rgba(255, 255, 255, 0.9);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.report-basic-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-md);
  flex: 1;
}

.info-row {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-sm);
}

.info-label {
  font-weight: var(--font-weight-medium);
  color: var(--text-secondary);
  white-space: nowrap;
}

.info-value {
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
}

/* 완료일 누적 표시 */
.complete-dates {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.complete-date-item {
  font-size: var(--font-sm);
  color: var(--text-primary);
}

/* 상태 뱃지 */
.status-badge {
  padding: var(--spacing-xs) var(--spacing-md);
  border-radius: var(--radius-full);
  font-size: var(--font-sm);
  font-weight: var(--font-weight-bold);
  display: inline-block;
}

.status-badge.completed {
  background: rgba(16, 185, 129, 0.2);
  color: #059669;
}

.status-badge.partial {
  background: rgba(245, 158, 11, 0.2);
  color: #d97706;
}

.status-badge.incomplete {
  background: rgba(239, 68, 68, 0.2);
  color: #dc2626;
}

/* 토글 버튼 */
.btn-toggle-detail {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-lg);
  font-weight: var(--font-weight-bold);
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
}

.btn-toggle-detail:hover {
  background: var(--color-primary-dark);
  transform: translateY(-2px);
}

.toggle-icon {
  transition: transform 0.3s ease;
}

.btn-toggle-detail.expanded .toggle-icon {
  transform: rotate(180deg);
}
```

### 3-5. 상세 영역 스타일 (2단계 - 아코디언)

```css
/* 상세 영역 (아코디언) */
.report-detail {
  padding: var(--spacing-xl);
  background: rgba(248, 250, 252, 0.95);
  animation: slideDown 0.4s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    max-height: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    max-height: 5000px;
    transform: translateY(0);
  }
}

/* 상세 섹션 */
.detail-section {
  margin-bottom: var(--spacing-xl);
  padding: var(--spacing-xl);
  background: rgba(255, 255, 255, 0.9);
  border-radius: var(--radius-lg);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.section-title {
  font-size: var(--font-xl);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-md);
  border-bottom: 2px solid rgba(0, 0, 0, 0.1);
}

/* 작성 내용 표시 */
.written-content {
  margin-bottom: var(--spacing-lg);
  padding: var(--spacing-lg);
  background: rgba(59, 130, 246, 0.05);
  border-left: 4px solid var(--color-primary);
}

.content-subtitle {
  font-size: var(--font-lg);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  margin-bottom: var(--spacing-md);
}

.content-info {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

.info-item {
  display: flex;
  gap: var(--spacing-md);
  font-size: var(--font-md);
}

.info-item span {
  color: var(--text-secondary);
}

.info-item strong {
  color: var(--text-primary);
  font-weight: var(--font-weight-bold);
}

/* 실적 입력 영역 */
.actual-input {
  margin-bottom: var(--spacing-lg);
  padding: var(--spacing-lg);
  background: rgba(16, 185, 129, 0.05);
  border-left: 4px solid var(--color-success);
}

.input-group {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-md);
  align-items: end;
}

.form-field {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

.form-field label {
  font-weight: var(--font-weight-medium);
  color: var(--text-primary);
  font-size: var(--font-sm);
}

.btn-add-actual,
.btn-add-sales-actual,
.btn-add-activity-actual {
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-success);
  color: white;
  border: none;
  border-radius: var(--radius-lg);
  font-weight: var(--font-weight-bold);
  cursor: pointer;
  transition: all 0.3s ease;
  white-space: nowrap;
}

.btn-add-actual:hover,
.btn-add-sales-actual:hover,
.btn-add-activity-actual:hover {
  background: #059669;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

/* 입력된 실적 표시 */
.actual-list {
  margin-bottom: var(--spacing-lg);
  padding: var(--spacing-lg);
  background: rgba(255, 255, 255, 1);
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.actual-items {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
}

.actual-item {
  padding: var(--spacing-md);
  background: rgba(248, 250, 252, 0.8);
  border-radius: var(--radius-md);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.confirmed-date {
  font-size: var(--font-sm);
  color: var(--text-secondary);
  font-style: italic;
}

.actual-summary {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  padding-top: var(--spacing-md);
  border-top: 2px solid rgba(0, 0, 0, 0.1);
}

.summary-item {
  display: flex;
  justify-content: space-between;
  font-size: var(--font-md);
}

.summary-item strong {
  color: var(--color-success);
  font-weight: var(--font-weight-bold);
  font-size: var(--font-lg);
}

/* 섹션 상태 */
.section-status {
  margin-top: var(--spacing-md);
  padding: var(--spacing-md);
  background: rgba(248, 250, 252, 0.8);
  border-radius: var(--radius-md);
  font-weight: var(--font-weight-medium);
  text-align: center;
}

/* 글자수 카운터 */
.char-counter {
  margin-top: var(--spacing-xs);
  font-size: var(--font-sm);
  color: var(--text-secondary);
}

.char-count {
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
}

.char-status {
  margin-left: var(--spacing-sm);
  font-weight: var(--font-weight-bold);
}

.char-status.valid {
  color: var(--color-success);
}

.char-status.invalid {
  color: var(--color-error);
}

/* 액션 버튼 */
.detail-actions {
  display: flex;
  justify-content: center;
  gap: var(--spacing-md);
  margin-top: var(--spacing-xl);
}

.btn-save {
  padding: var(--spacing-lg) var(--spacing-2xl);
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-lg);
  font-size: var(--font-lg);
  font-weight: var(--font-weight-bold);
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn-save:hover {
  background: var(--color-primary-dark);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
}
```

---

## 4. JavaScript 인터랙션

### 4-1. 초기화 및 데이터 로드

```javascript
// 상태 관리
const state = {
  reports: [],
  expandedReportId: null,
  currentUser: null
};

// DOM 요소
const elements = {
  reportList: document.getElementById('reportList'),
  btnRefresh: document.getElementById('btnRefresh'),
  filterType: document.getElementById('filterType'),
  filterStatus: document.getElementById('filterStatus'),
  btnSearch: document.getElementById('btnSearch'),
  totalCount: document.getElementById('totalCount'),
  completedCount: document.getElementById('completedCount'),
  partialCount: document.getElementById('partialCount'),
  incompleteCount: document.getElementById('incompleteCount')
};

// 초기화
async function init() {
  // 사용자 정보 로드
  await loadCurrentUser();

  // 보고서 목록 로드
  await loadReports();

  // 이벤트 리스너 등록
  attachEventListeners();
}

// 페이지 로드 시 초기화
document.addEventListener('DOMContentLoaded', init);

// 이벤트 리스너 등록
function attachEventListeners() {
  elements.btnRefresh.addEventListener('click', loadReports);
  elements.btnSearch.addEventListener('click', handleSearch);

  // 필터 변경 시 자동 검색
  elements.filterType.addEventListener('change', handleSearch);
  elements.filterStatus.addEventListener('change', handleSearch);
}
```

### 4-2. 보고서 목록 렌더링

```javascript
// 보고서 목록 로드
async function loadReports() {
  try {
    showLoading();

    const response = await apiManager.getReports({
      employee_id: state.currentUser.id
    });

    if (response && Array.isArray(response)) {
      state.reports = response;
      renderReportList(response);
      updateSummaryCards(response);
    }

    hideLoading();
  } catch (error) {
    console.error('보고서 로드 실패:', error);
    alert('보고서를 불러오는데 실패했습니다.');
    hideLoading();
  }
}

// 보고서 목록 렌더링
function renderReportList(reports) {
  const list = elements.reportList;
  list.innerHTML = '';

  if (reports.length === 0) {
    list.innerHTML = '<div class="empty-state">표시할 보고서가 없습니다.</div>';
    return;
  }

  reports.forEach(report => {
    const item = createReportItem(report);
    list.appendChild(item);
  });
}

// 보고서 항목 생성
function createReportItem(report) {
  const template = document.getElementById('report-item-template');
  const clone = template.content.cloneNode(true);
  const item = clone.querySelector('.report-item');

  // 데이터 속성 설정
  item.dataset.reportId = report.id;

  // 기본 정보 채우기
  clone.querySelector('.report-id').textContent = report.id;
  clone.querySelector('.report-type').textContent = getReportTypeLabel(report.type);
  clone.querySelector('.submit-date').textContent = formatDateTime(report.submitted_date);

  // 완료일 누적 표시
  const completeDates = clone.querySelector('.complete-dates');
  if (report.complete_dates && report.complete_dates.length > 0) {
    report.complete_dates.forEach(date => {
      const dateItem = document.createElement('div');
      dateItem.className = 'complete-date-item';
      dateItem.textContent = formatDateTime(date);
      completeDates.appendChild(dateItem);
    });
  } else {
    completeDates.textContent = '-';
  }

  // 상태 뱃지
  const statusBadge = clone.querySelector('.status-badge');
  statusBadge.textContent = getStatusLabel(report.status);
  statusBadge.classList.add(report.status);

  // 토글 버튼 이벤트
  const btnToggle = clone.querySelector('.btn-toggle-detail');
  btnToggle.addEventListener('click', () => toggleReportDetail(report.id));

  // 상세 정보 채우기
  fillReportDetail(clone, report);

  return clone;
}

// 보고서 타입 라벨
function getReportTypeLabel(type) {
  const labels = {
    weekly: '주간',
    monthly: '월간',
    annual: '연간'
  };
  return labels[type] || type;
}

// 상태 라벨
function getStatusLabel(status) {
  const labels = {
    completed: '완료',
    partial: '일부완료',
    incomplete: '미완료'
  };
  return labels[status] || status;
}

// 날짜/시간 포맷
function formatDateTime(dateStr) {
  const date = new Date(dateStr);
  return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;
}

// 통계 카드 업데이트
function updateSummaryCards(reports) {
  const total = reports.length;
  const completed = reports.filter(r => r.status === 'completed').length;
  const partial = reports.filter(r => r.status === 'partial').length;
  const incomplete = reports.filter(r => r.status === 'incomplete').length;

  elements.totalCount.textContent = total;
  elements.completedCount.textContent = completed;
  elements.partialCount.textContent = partial;
  elements.incompleteCount.textContent = incomplete;
}
```

---

## 5. 아코디언 확장 메커니즘

### 5-1. 토글 기능

```javascript
// 상세 영역 토글
function toggleReportDetail(reportId) {
  const item = document.querySelector(`[data-report-id="${reportId}"]`);
  const detail = item.querySelector('.report-detail');
  const btnToggle = item.querySelector('.btn-toggle-detail');

  // 다른 항목이 열려있으면 닫기
  if (state.expandedReportId && state.expandedReportId !== reportId) {
    const prevItem = document.querySelector(`[data-report-id="${state.expandedReportId}"]`);
    if (prevItem) {
      prevItem.querySelector('.report-detail').style.display = 'none';
      prevItem.querySelector('.btn-toggle-detail').classList.remove('expanded');
    }
  }

  // 현재 항목 토글
  if (detail.style.display === 'none' || !detail.style.display) {
    detail.style.display = 'block';
    btnToggle.classList.add('expanded');
    state.expandedReportId = reportId;

    // 스크롤 위치 조정
    setTimeout(() => {
      item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }, 100);
  } else {
    detail.style.display = 'none';
    btnToggle.classList.remove('expanded');
    state.expandedReportId = null;
  }
}
```

### 5-2. 상세 정보 채우기

```javascript
// 상세 정보 채우기
function fillReportDetail(element, report) {
  // 기본 정보
  element.querySelector('.detail-report-id').textContent = report.id;
  element.querySelector('.detail-report-type').textContent = getReportTypeLabel(report.type);
  element.querySelector('.detail-company').textContent = report.company_name;
  element.querySelector('.detail-employee').textContent = report.employee_name;
  element.querySelector('.detail-submit-date').textContent = formatDateTime(report.submitted_date);

  // 확정일 누적 표시
  const detailCompleteDates = element.querySelector('.detail-complete-dates');
  if (report.complete_dates && report.complete_dates.length > 0) {
    report.complete_dates.forEach(date => {
      const dateItem = document.createElement('div');
      dateItem.textContent = formatDateTime(date);
      detailCompleteDates.appendChild(dateItem);
    });
  } else {
    detailCompleteDates.textContent = '-';
  }

  element.querySelector('.detail-status').textContent = getStatusLabel(report.status);

  // 섹션별 데이터 채우기
  if (report.collection_data) {
    fillCollectionSection(element, report.collection_data);
  } else {
    element.querySelector('.collection-section').style.display = 'none';
  }

  if (report.sales_data) {
    fillSalesSection(element, report.sales_data);
  } else {
    element.querySelector('.sales-section').style.display = 'none';
  }

  if (report.activity_data) {
    fillActivitySection(element, report.activity_data);
  } else {
    element.querySelector('.activity-section').style.display = 'none';
  }

  // 이벤트 바인딩
  bindDetailEvents(element, report);
}
```

---

## 6. 누적 데이터 처리

### 6-1. 실적금액 추가 (수금)

```javascript
// 수금 섹션 채우기
function fillCollectionSection(element, data) {
  const section = element.querySelector('.collection-section');
  section.style.display = 'block';

  // 작성 내용
  section.querySelector('.written-collection-amount').textContent = formatMoney(data.target_amount);
  section.querySelector('.written-collection-date').textContent = data.target_date;

  // 기존 실적 표시
  if (data.actuals && data.actuals.length > 0) {
    renderCollectionActuals(section, data.actuals);
  }
}

// 수금 실적 렌더링
function renderCollectionActuals(section, actuals) {
  const actualItems = section.querySelector('.actual-items');
  actualItems.innerHTML = '';

  let totalActual = 0;

  actuals.forEach(actual => {
    const item = document.createElement('div');
    item.className = 'actual-item';
    item.innerHTML = `
      <span>${actual.date}: ${formatMoney(actual.amount)}원</span>
      <span class="confirmed-date">(확정일: ${formatDateTime(actual.confirmed_at)})</span>
    `;
    actualItems.appendChild(item);

    totalActual += actual.amount;
  });

  // 요약 업데이트
  const targetAmount = parseFloat(section.querySelector('.written-collection-amount').textContent.replace(/,/g, ''));
  const achievementRate = targetAmount > 0 ? (totalActual / targetAmount * 100).toFixed(1) : 0;

  section.querySelector('.total-collection-actual').textContent = formatMoney(totalActual);
  section.querySelector('.collection-achievement-rate').textContent = achievementRate;

  // 상태 업데이트
  updateCollectionStatus(section, achievementRate);
}

// 수금 실적 추가 이벤트
function bindCollectionAddEvent(section, reportId) {
  const btnAdd = section.querySelector('.btn-add-actual');
  const amountInput = section.querySelector('.actual-collection-amount');
  const dateInput = section.querySelector('.actual-collection-date');

  btnAdd.addEventListener('click', async () => {
    const amount = parseFloat(amountInput.value);
    const date = dateInput.value;

    if (!amount || amount <= 0) {
      alert('실적금액을 입력하세요.');
      return;
    }

    if (!date) {
      alert('수금일을 선택하세요.');
      return;
    }

    try {
      const response = await apiManager.addCollectionActual({
        report_id: reportId,
        amount: amount,
        date: date
      });

      if (response.success) {
        alert('실적이 추가되었습니다.');

        // 입력 필드 초기화
        amountInput.value = '';
        dateInput.value = '';

        // 실적 목록 다시 렌더링
        renderCollectionActuals(section, response.actuals);
      }
    } catch (error) {
      console.error('실적 추가 실패:', error);
      alert('실적 추가에 실패했습니다.');
    }
  });
}

// 금액 포맷
function formatMoney(value) {
  return new Intl.NumberFormat('ko-KR').format(value);
}
```

### 6-2. 제품별 매출 실적 추가

```javascript
// 매출 섹션 채우기
function fillSalesSection(element, data) {
  const section = element.querySelector('.sales-section');
  section.style.display = 'block';

  // 작성 내용 (제품별)
  const writtenList = section.querySelector('.product-written-list');
  writtenList.innerHTML = '';

  data.products.forEach(product => {
    const item = document.createElement('div');
    item.className = 'written-product-item';
    item.innerHTML = `
      <div class="product-name">${product.name}</div>
      <div class="product-target">계획 매출액: ${formatMoney(product.target_amount)}원</div>
      <div class="product-date">예정일: ${product.target_date}</div>
    `;
    writtenList.appendChild(item);
  });

  // 제품 선택 옵션 생성
  const productSelect = section.querySelector('.product-select');
  productSelect.innerHTML = '<option value="">선택하세요</option>';
  data.products.forEach(product => {
    const option = document.createElement('option');
    option.value = product.id;
    option.textContent = product.name;
    option.dataset.targetAmount = product.target_amount;
    productSelect.appendChild(option);
  });

  // 기존 실적 표시
  if (data.actuals && data.actuals.length > 0) {
    renderSalesActuals(section, data.products, data.actuals);
  }
}

// 매출 실적 렌더링 (제품별 그룹화)
function renderSalesActuals(section, products, actuals) {
  const actualList = section.querySelector('.product-actual-list');
  actualList.innerHTML = '';

  // 제품별로 그룹화
  products.forEach(product => {
    const productActuals = actuals.filter(a => a.product_id === product.id);

    const productGroup = document.createElement('div');
    productGroup.className = 'product-actual-group';

    const header = document.createElement('div');
    header.className = 'product-actual-header';
    header.textContent = `【${product.name}】`;
    productGroup.appendChild(header);

    if (productActuals.length > 0) {
      const items = document.createElement('div');
      items.className = 'product-actual-items';

      let productTotal = 0;

      productActuals.forEach(actual => {
        const item = document.createElement('div');
        item.className = 'actual-item';
        item.innerHTML = `
          <span>${actual.date}: ${formatMoney(actual.amount)}원${actual.vat_included ? ' (VAT 포함)' : ''}</span>
          <span class="confirmed-date">(확정일: ${formatDateTime(actual.confirmed_at)})</span>
        `;
        items.appendChild(item);

        productTotal += actual.amount;
      });

      productGroup.appendChild(items);

      // 제품별 요약
      const summary = document.createElement('div');
      summary.className = 'product-actual-summary';
      const achievementRate = (productTotal / product.target_amount * 100).toFixed(1);
      summary.innerHTML = `
        누적: ${formatMoney(productTotal)}원 / 달성률: ${achievementRate}% ${achievementRate >= 100 ? '✅' : '⚠️'}
      `;
      productGroup.appendChild(summary);
    } else {
      const empty = document.createElement('div');
      empty.className = 'empty-actuals';
      empty.textContent = '실적 없음';
      productGroup.appendChild(empty);
    }

    actualList.appendChild(productGroup);
  });
}

// 매출 실적 추가 이벤트
function bindSalesAddEvent(section, reportId) {
  const btnAdd = section.querySelector('.btn-add-sales-actual');
  const productSelect = section.querySelector('.product-select');
  const amountInput = section.querySelector('.actual-sales-amount');
  const dateInput = section.querySelector('.actual-sales-date');
  const vatCheckbox = section.querySelector('.vat-included');

  btnAdd.addEventListener('click', async () => {
    const productId = productSelect.value;
    let amount = parseFloat(amountInput.value);
    const date = dateInput.value;
    const vatIncluded = vatCheckbox.checked;

    if (!productId) {
      alert('제품을 선택하세요.');
      return;
    }

    if (!amount || amount <= 0) {
      alert('실적금액을 입력하세요.');
      return;
    }

    if (!date) {
      alert('매출일을 선택하세요.');
      return;
    }

    // VAT 포함 시 자동 계산
    if (vatIncluded) {
      amount = amount / 1.1;
    }

    try {
      const response = await apiManager.addSalesActual({
        report_id: reportId,
        product_id: productId,
        amount: amount,
        date: date,
        vat_included: vatIncluded
      });

      if (response.success) {
        alert('실적이 추가되었습니다.');

        // 입력 필드 초기화
        productSelect.value = '';
        amountInput.value = '';
        dateInput.value = '';
        vatCheckbox.checked = false;

        // 실적 목록 다시 렌더링
        renderSalesActuals(section, response.products, response.actuals);
      }
    } catch (error) {
      console.error('실적 추가 실패:', error);
      alert('실적 추가에 실패했습니다.');
    }
  });
}
```

### 6-3. 활동 확인 추가

```javascript
// 활동 섹션 채우기
function fillActivitySection(element, data) {
  const section = element.querySelector('.activity-section');
  section.style.display = 'block';

  // 작성 내용
  const writtenList = section.querySelector('.activity-written-list');
  writtenList.innerHTML = '';

  data.activities.forEach((activity, index) => {
    const item = document.createElement('div');
    item.className = 'written-activity-item';
    item.innerHTML = `
      <div class="activity-number">${index + 1}️⃣ ${getActivityTypeLabel(activity.type)}</div>
      <div class="activity-details">
        ${formatActivityDetails(activity)}
      </div>
    `;
    writtenList.appendChild(item);
  });

  // 활동 선택 옵션 생성
  const activitySelect = section.querySelector('.activity-select');
  activitySelect.innerHTML = '<option value="">선택하세요</option>';
  data.activities.forEach((activity, index) => {
    const option = document.createElement('option');
    option.value = activity.id;
    option.textContent = `${index + 1}. ${getActivityTypeLabel(activity.type)}`;
    activitySelect.appendChild(option);
  });

  // 실행 여부 라디오 이벤트
  const executedRadios = section.querySelectorAll('input[name="activity-executed"]');
  const contentField = section.querySelector('.execution-content-field');
  const contentTextarea = section.querySelector('.execution-content');
  const charCount = section.querySelector('.char-count');
  const charStatus = section.querySelector('.char-status');

  executedRadios.forEach(radio => {
    radio.addEventListener('change', (e) => {
      if (e.target.value === 'yes') {
        contentField.style.display = 'block';
      } else {
        contentField.style.display = 'none';
      }
    });
  });

  // 글자수 카운터
  contentTextarea.addEventListener('input', (e) => {
    const length = e.target.value.length;
    charCount.textContent = length;

    if (length >= 15) {
      charStatus.textContent = '✅ (충분)';
      charStatus.classList.add('valid');
      charStatus.classList.remove('invalid');
    } else {
      charStatus.textContent = `❌ (15자 이상 필요)`;
      charStatus.classList.remove('valid');
      charStatus.classList.add('invalid');
    }
  });

  // 기존 확인 결과 표시
  if (data.confirmations && data.confirmations.length > 0) {
    renderActivityConfirmations(section, data.confirmations);
  }
}

// 활동 타입 라벨
function getActivityTypeLabel(type) {
  const labels = {
    call: '전화통화 예정',
    visit: '방문예정',
    document: '문서전달',
    other: '기타'
  };
  return labels[type] || type;
}

// 활동 세부 정보 포맷
function formatActivityDetails(activity) {
  let details = [];

  if (activity.date) details.push(`날짜: ${activity.date}`);
  if (activity.time) details.push(`시간: ${activity.time}`);
  if (activity.target) details.push(`대상자: ${activity.target}`);
  if (activity.location) details.push(`장소: ${activity.location}`);
  if (activity.purpose) details.push(`목적: ${activity.purpose}`);
  if (activity.method) details.push(`전달방법: ${activity.method}`);
  if (activity.document_name) details.push(`문서: ${activity.document_name}`);

  return details.map(d => `<div>${d}</div>`).join('');
}

// 활동 확인 결과 렌더링
function renderActivityConfirmations(section, confirmations) {
  const actualList = section.querySelector('.activity-actual-list');
  actualList.innerHTML = '';

  confirmations.forEach(conf => {
    const item = document.createElement('div');
    item.className = 'actual-item';
    item.innerHTML = `
      <div>
        <div>${conf.executed ? '✅' : '❌'} ${conf.activity_index + 1}. ${getActivityTypeLabel(conf.activity_type)} - ${conf.executed ? '실행함' : '실행 안함'}</div>
        <div class="activity-content">"${conf.content}"</div>
      </div>
      <span class="confirmed-date">(확정일: ${formatDateTime(conf.confirmed_at)})</span>
    `;
    actualList.appendChild(item);
  });
}

// 활동 확인 추가 이벤트
function bindActivityAddEvent(section, reportId) {
  const btnAdd = section.querySelector('.btn-add-activity-actual');
  const activitySelect = section.querySelector('.activity-select');
  const executedRadios = section.querySelectorAll('input[name="activity-executed"]');
  const contentTextarea = section.querySelector('.execution-content');

  btnAdd.addEventListener('click', async () => {
    const activityId = activitySelect.value;
    const executed = document.querySelector('input[name="activity-executed"]:checked')?.value;
    const content = contentTextarea.value.trim();

    if (!activityId) {
      alert('활동을 선택하세요.');
      return;
    }

    if (!executed) {
      alert('실행 여부를 선택하세요.');
      return;
    }

    if (executed === 'yes' && content.length < 15) {
      alert('실행 내용을 15자 이상 입력하세요.');
      return;
    }

    try {
      const response = await apiManager.addActivityConfirmation({
        report_id: reportId,
        activity_id: activityId,
        executed: executed === 'yes',
        content: content
      });

      if (response.success) {
        alert('활동 확인이 추가되었습니다.');

        // 입력 필드 초기화
        activitySelect.value = '';
        executedRadios.forEach(r => r.checked = false);
        contentTextarea.value = '';
        section.querySelector('.execution-content-field').style.display = 'none';
        section.querySelector('.char-count').textContent = '0';

        // 확인 목록 다시 렌더링
        renderActivityConfirmations(section, response.confirmations);
      }
    } catch (error) {
      console.error('활동 확인 추가 실패:', error);
      alert('활동 확인 추가에 실패했습니다.');
    }
  });
}
```

### 6-4. 저장 및 확정일 기록

```javascript
// 저장 버튼 이벤트
function bindSaveEvent(element, reportId) {
  const btnSave = element.querySelector('.btn-save');

  btnSave.addEventListener('click', async () => {
    if (!confirm('현재까지 입력한 내용을 저장하시겠습니까?')) {
      return;
    }

    try {
      const response = await apiManager.saveReportConfirmation({
        report_id: reportId,
        confirmed_at: new Date().toISOString()
      });

      if (response.success) {
        alert('저장되었습니다. 확정일이 기록되었습니다.');

        // 보고서 목록 다시 로드
        await loadReports();

        // 상세 영역 닫기
        const item = document.querySelector(`[data-report-id="${reportId}"]`);
        item.querySelector('.report-detail').style.display = 'none';
        item.querySelector('.btn-toggle-detail').classList.remove('expanded');
        state.expandedReportId = null;
      }
    } catch (error) {
      console.error('저장 실패:', error);
      alert('저장에 실패했습니다.');
    }
  });
}

// 상세 이벤트 바인딩
function bindDetailEvents(element, report) {
  const reportId = report.id;

  // 섹션별 이벤트 바인딩
  if (report.collection_data) {
    const collectionSection = element.querySelector('.collection-section');
    bindCollectionAddEvent(collectionSection, reportId);
  }

  if (report.sales_data) {
    const salesSection = element.querySelector('.sales-section');
    bindSalesAddEvent(salesSection, reportId);
  }

  if (report.activity_data) {
    const activitySection = element.querySelector('.activity-section');
    bindActivityAddEvent(activitySection, reportId);
  }

  // 저장 버튼
  bindSaveEvent(element, reportId);
}
```

---

## 7. 반응형 디자인

### 7-1. 태블릿 (768px ~ 1024px)

```css
@media (max-width: 1024px) {
  .summary-cards {
    grid-template-columns: repeat(2, 1fr);
  }

  .search-filters {
    flex-wrap: wrap;
  }

  .report-basic-info {
    grid-template-columns: 1fr;
  }

  .input-group {
    grid-template-columns: 1fr;
  }
}
```

### 7-2. 모바일 (~ 767px)

```css
@media (max-width: 767px) {
  .summary-cards {
    grid-template-columns: 1fr;
  }

  .search-filters {
    flex-direction: column;
    align-items: stretch;
  }

  .filter-group {
    flex-direction: column;
    align-items: stretch;
  }

  .report-header {
    flex-direction: column;
    gap: var(--spacing-md);
  }

  .btn-toggle-detail {
    width: 100%;
    justify-content: center;
  }

  .input-group {
    grid-template-columns: 1fr;
  }

  .detail-actions {
    flex-direction: column;
  }

  .btn-save {
    width: 100%;
  }
}
```

---

## 8. 접근성 고려사항

### 8-1. ARIA 속성

```html
<!-- 아코디언 -->
<button
  class="btn-toggle-detail"
  aria-expanded="false"
  aria-controls="report-detail-{reportId}"
>
  상세보기
</button>

<div
  id="report-detail-{reportId}"
  class="report-detail"
  role="region"
  aria-labelledby="report-header-{reportId}"
  hidden
>
  <!-- 내용 -->
</div>
```

### 8-2. 키보드 네비게이션

```javascript
// Enter/Space로 토글
document.querySelectorAll('.btn-toggle-detail').forEach(btn => {
  btn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      btn.click();
    }
  });
});
```

---

## 9. 구현 체크리스트

### Phase 1: 기본 구조
- [ ] HTML 마크업 작성
- [ ] CSS 기본 스타일 적용
- [ ] 보고서 목록 렌더링

### Phase 2: 아코디언 기능
- [ ] 토글 버튼 동작
- [ ] 상세 영역 펼치기/접기
- [ ] 한 번에 하나만 열리도록 제어

### Phase 3: 데이터 표시
- [ ] 작성 내용 표시
- [ ] 누적 실적 표시
- [ ] 확정일 누적 표시

### Phase 4: 실적 입력
- [ ] 수금 실적 추가
- [ ] 매출 실적 추가 (제품별)
- [ ] 활동 확인 추가 (15자 검증)

### Phase 5: 저장 및 갱신
- [ ] 저장 기능
- [ ] 확정일 기록
- [ ] 목록 자동 갱신

### Phase 6: 반응형 및 접근성
- [ ] 반응형 디자인
- [ ] ARIA 속성
- [ ] 키보드 네비게이션

---

## 참고 자료

- [MDN Web Docs - Accordion Pattern](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/region_role)
- [W3C WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/patterns/accordion/)
- [CSS Tricks - Smooth Accordion](https://css-tricks.com/how-to-animate-the-details-element/)
