# 관리자의견 확인 UI 구현 가이드

**프로젝트**: KUWOTECH 영업관리시스템
**작성일**: 2025-10-08
**대상 화면**: 영업담당 - 관리자의견 확인
**목적**: 관리자가 작성한 의견이 포함된 보고서를 읽기 전용으로 확인하는 화면의 구체적인 구현 방법 가이드

---

## 📋 목차

1. [화면 레이아웃 구조](#1-화면-레이아웃-구조)
2. [HTML 구조 설계](#2-html-구조-설계)
3. [CSS 스타일링 가이드](#3-css-스타일링-가이드)
4. [JavaScript 인터랙션](#4-javascript-인터랙션)
5. [컴포넌트별 구현](#5-컴포넌트별-구현)
6. [반응형 디자인](#6-반응형-디자인)
7. [접근성 고려사항](#7-접근성-고려사항)
8. [데이터 흐름](#8-데이터-흐름)

---

## 1. 화면 레이아웃 구조

### 1-1. 전체 레이아웃 구성도

```
┌─────────────────────────────────────────────────────────────────────┐
│ 영업담당모드 레이아웃                                                │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ Header: 영업관리 시스템 - 영업담당모드                           │ │
│ └─────────────────────────────────────────────────────────────────┘ │
│ ┌──────────┬────────────────────────────────────────────────────────┐ │
│ │ Sidebar  │ Main Content (관리자의견 확인)                         │ │
│ │          │ ┌────────────┬─────────────────────────────────────┐ │ │
│ │ 📊 대시보드│ │ 💬 의견    │ 📋 실적보고서 상세                  │ │ │
│ │ 🏢 거래처  │ │ 리스트    │                                     │ │ │
│ │ ✏️ 작성    │ │ (사이드바) │ ┌─────────────────────────────────┐ │ │ │
│ │ 📋 확인    │ │            │ │ Header: 제출일/거래처/작성자    │ │ │ │
│ │ 💬 의견확인│ │ 📅날짜     │ ├─────────────────────────────────┤ │ │ │
│ │ 💾 데이터  │ │ 🏢회사     │ │ 💰 실적 정보                    │ │ │ │
│ │ ⚙️ 설정    │ │ 💬의견확인 │ │ - 목표 수금액                   │ │ │ │
│ │            │ │            │ │ - 목표 매출액                   │ │ │ │
│ │            │ │ 📅날짜     │ │ - 목표 상품                     │ │ │ │
│ │            │ │ 🏢회사     │ ├─────────────────────────────────┤ │ │ │
│ │            │ │ 💬의견확인 │ │ 📝 영업활동 내역                │ │ │ │
│ │            │ │            │ │ - 활동 카드 리스트              │ │ │ │
│ │            │ │ (스크롤)   │ ├─────────────────────────────────┤ │ │ │
│ │            │ │            │ │ 💬 관리자 의견 (강조)           │ │ │ │
│ │            │ │            │ │ - READ ONLY 배지                │ │ │ │
│ │            │ │            │ │ - 의견 내용                     │ │ │ │
│ │            │ │            │ │ - 작성자/작성일                 │ │ │ │
│ │            │ │            │ └─────────────────────────────────┘ │ │ │
│ │            │ └────────────┴─────────────────────────────────────┘ │ │
│ └──────────┴────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
```

### 1-2. 화면 영역 비율

```
┌─────────────────────────────────────┐
│ Sidebar (280px 고정)                │
├─────────────────────────────────────┤
│ ┌─────────────┬──────────────────┐ │
│ │ 리스트      │ 상세 콘텐츠      │ │
│ │ (280px)     │ (나머지)         │ │
│ │             │                  │ │
│ │ - 헤더      │ - 헤더           │ │
│ │ - 카운트    │ - 실적 정보      │ │
│ │ - 리스트    │ - 영업활동       │ │
│ │             │ - 관리자 의견    │ │
│ │ (스크롤)    │ (스크롤)         │ │
│ └─────────────┴──────────────────┘ │
└─────────────────────────────────────┘
```

### 1-3. 2열 레이아웃 특징

- **왼쪽 사이드바 (280px)**: 관리자 의견이 있는 보고서 리스트
- **오른쪽 메인 콘텐츠 (flex: 1)**: 선택한 보고서의 상세 내용 + 관리자 의견
- **독립적인 스크롤**: 각 영역이 독립적으로 스크롤 가능
- **반응형**: 태블릿/모바일에서 세로 배치로 전환

---

## 2. HTML 구조 설계

### 2-1. 전체 컨테이너 구조

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자의견 확인</title>
    <!-- CSS 링크 -->
</head>
<body>
    <div class="admin-feedback-container">
        <!-- 왼쪽: 보고서 리스트 사이드바 -->
        <aside class="feedback-sidebar">
            <!-- 사이드바 컨텐츠 -->
        </aside>

        <!-- 오른쪽: 보고서 상세 + 관리자 의견 -->
        <main class="feedback-content">
            <!-- 메인 컨텐츠 -->
        </main>
    </div>

    <script type="module" src="./02_admin_feedback.js"></script>
</body>
</html>
```

### 2-2. 사이드바 구조 (보고서 리스트)

```html
<aside class="feedback-sidebar">
    <!-- 헤더 -->
    <div class="sidebar-header">
        <h3>💬 관리자 의견</h3>
        <span class="feedback-count" id="feedbackCount">0</span>
    </div>

    <!-- 보고서 리스트 -->
    <div class="report-list" id="reportList">
        <!-- 보고서 항목 (동적 생성) -->
        <div class="report-item active" onclick="handleReportClick('report-id')">
            <div class="report-date">📅 2025-10-08</div>
            <div class="report-company">🏢 (주)테크이노베이션</div>
            <span class="feedback-badge">💬 의견 확인</span>
        </div>

        <div class="report-item">
            <div class="report-date">📅 2025-10-07</div>
            <div class="report-company">🏢 글로벌솔루션</div>
            <span class="feedback-badge">💬 의견 확인</span>
        </div>

        <!-- 빈 상태 (의견 없음) -->
        <div class="empty-state">
            <div class="empty-state-icon">📭</div>
            <div class="empty-state-text">의견이 작성된 보고서가 없습니다</div>
        </div>
    </div>
</aside>
```

### 2-3. 메인 콘텐츠 구조 (보고서 상세)

```html
<main class="feedback-content" id="detailContent">
    <!-- 선택 전 빈 상태 -->
    <div class="empty-state">
        <div class="empty-state-icon">📋</div>
        <div class="empty-state-text">보고서를 선택해주세요</div>
        <div class="empty-state-subtext">
            왼쪽 목록에서 보고서를 클릭하면 상세 내용과 관리자 의견을 확인할 수 있습니다
        </div>
    </div>

    <!-- 보고서 선택 후 (동적 생성) -->
    <!-- 헤더 -->
    <div class="content-header">
        <h2>📋 실적보고서 상세</h2>
        <div class="report-meta">
            <div class="report-meta-item">
                <span>📅 제출일:</span>
                <strong>2025-10-08</strong>
            </div>
            <div class="report-meta-item">
                <span>🏢 거래처:</span>
                <strong>(주)테크이노베이션</strong>
            </div>
            <div class="report-meta-item">
                <span>👤 작성자:</span>
                <strong>강민</strong>
            </div>
        </div>
    </div>

    <!-- 실적 정보 섹션 -->
    <div class="report-section">
        <div class="section-title">💰 실적 정보</div>
        <div class="report-grid">
            <div class="report-field">
                <div class="field-label">목표 수금액</div>
                <div class="field-value highlight">5,000,000원</div>
            </div>
            <div class="report-field">
                <div class="field-label">목표 매출액</div>
                <div class="field-value highlight">10,000,000원</div>
            </div>
            <div class="report-field">
                <div class="field-label">목표 상품</div>
                <div class="field-value">스마트센서, IoT게이트웨이</div>
            </div>
        </div>
    </div>

    <!-- 영업활동 내역 섹션 -->
    <div class="report-section">
        <div class="section-title">📝 영업활동 내역</div>
        <div class="activity-list">
            <div class="activity-item">
                <div class="activity-company">(주)테크이노베이션</div>
                <div class="activity-content">
                    신제품 스마트센서 시연 완료. 구매팀장 긍정적 반응.
                </div>
            </div>
            <div class="activity-item">
                <div class="activity-company">글로벌솔루션</div>
                <div class="activity-content">
                    IoT게이트웨이 납품 협의. 수량 100대 확정.
                </div>
            </div>
        </div>
    </div>

    <!-- 관리자 의견 섹션 (강조) -->
    <div class="admin-opinion-section">
        <div class="opinion-header">
            <h3>💬 관리자 의견</h3>
            <span class="opinion-badge">READ ONLY</span>
        </div>
        <div class="opinion-content">
수고하셨습니다.

테크이노베이션 건은 다음주 견적 제출 시 10% 할인 조건 적용하여 진행해주시기 바랍니다.

글로벌솔루션 IoT게이트웨이 계약은 우선 추진 건으로 빠른 마무리 부탁드립니다.
        </div>
        <div class="opinion-footer">
            <span>작성자: 강정환</span>
            <span>작성일: 2025-10-08</span>
        </div>
    </div>
</main>
```

---

## 3. CSS 스타일링 가이드

### 3-1. 글로벌 변수

```css
:root {
    /* 색상 팔레트 */
    --primary-color: #4A90E2;
    --primary-rgb: 74, 144, 226;
    --primary-light: #E8F4FF;
    --primary-dark: #357ABD;
    --success-color: #52C41A;

    /* 배경색 */
    --bg-secondary: #f8f9fa;
    --card-bg: #ffffff;
    --glass-bg: rgba(255, 255, 255, 0.9);
    --hover-bg: #f0f7ff;

    /* 텍스트 색상 */
    --text-color: #2c3e50;
    --text-muted: #7f8c8d;

    /* 테두리 */
    --border-color: #e1e8ed;
    --border-radius-sm: 6px;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;

    /* 간격 */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;

    /* 그림자 */
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
}
```

### 3-2. 메인 컨테이너 레이아웃

```css
/* 2열 레이아웃 컨테이너 */
.admin-feedback-container {
    display: flex;
    gap: var(--spacing-lg);
    height: calc(100vh - 200px);
    padding: var(--spacing-lg);
}

/* 왼쪽 사이드바: 보고서 리스트 */
.feedback-sidebar {
    flex: 0 0 280px;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    overflow-y: auto;
    padding: var(--spacing-lg);
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-md);
}

/* 오른쪽 메인 콘텐츠: 보고서 상세 */
.feedback-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
    overflow-y: auto;
    padding: var(--spacing-lg);
    background: var(--glass-bg);
    backdrop-filter: blur(10px);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-md);
}
```

### 3-3. 사이드바 스타일

```css
/* 사이드바 헤더 */
.sidebar-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
}

.sidebar-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--primary-color);
}

/* 피드백 카운트 배지 */
.feedback-count {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 24px;
    height: 24px;
    padding: 0 8px;
    background: var(--primary-color);
    color: white;
    border-radius: 12px;
    font-size: 0.85rem;
    font-weight: 600;
}

/* 보고서 리스트 */
.report-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

/* 보고서 아이템 */
.report-item {
    padding: var(--spacing-md);
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
}

.report-item:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
    transform: translateX(4px);
}

.report-item.active {
    background: var(--primary-light);
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.1);
}

.report-date {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 4px;
}

.report-company {
    font-size: 0.85rem;
    color: var(--text-muted);
}

.feedback-badge {
    display: inline-block;
    padding: 2px 8px;
    margin-top: 6px;
    background: var(--success-color);
    color: white;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
}
```

### 3-4. 메인 콘텐츠 스타일

```css
/* 콘텐츠 헤더 */
.content-header {
    padding-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--border-color);
}

.content-header h2 {
    margin: 0 0 var(--spacing-sm) 0;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-color);
}

/* 보고서 메타 정보 */
.report-meta {
    display: flex;
    gap: var(--spacing-lg);
    font-size: 0.9rem;
    color: var(--text-muted);
}

.report-meta-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

/* 보고서 섹션 */
.report-section {
    padding: var(--spacing-lg);
    background: var(--card-bg);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--border-color);
}

.section-title {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--primary-color);
}

/* 실적 정보 그리드 */
.report-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-md);
}

.report-field {
    padding: var(--spacing-md);
    background: var(--bg-secondary);
    border-radius: var(--border-radius-sm);
}

.field-label {
    font-size: 0.85rem;
    font-weight: 500;
    color: var(--text-muted);
    margin-bottom: 4px;
}

.field-value {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-color);
}

.field-value.highlight {
    color: var(--primary-color);
    font-size: 1.2rem;
}

/* 영업활동 리스트 */
.activity-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.activity-item {
    padding: var(--spacing-md);
    background: var(--bg-secondary);
    border-left: 3px solid var(--primary-color);
    border-radius: var(--border-radius-sm);
}

.activity-company {
    font-weight: 600;
    color: var(--primary-color);
    margin-bottom: 4px;
}

.activity-content {
    font-size: 0.9rem;
    color: var(--text-color);
    line-height: 1.5;
}
```

### 3-5. 관리자 의견 섹션 (강조 스타일)

```css
/* 관리자 의견 섹션 - 강조 디자인 */
.admin-opinion-section {
    padding: var(--spacing-lg);
    background: linear-gradient(
        135deg,
        rgba(var(--primary-rgb), 0.05) 0%,
        rgba(var(--primary-rgb), 0.1) 100%
    );
    border: 2px solid var(--primary-color);
    border-radius: var(--border-radius-md);
    box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.15);
}

.opinion-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
}

.opinion-header h3 {
    margin: 0;
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--primary-color);
}

/* READ ONLY 배지 */
.opinion-badge {
    padding: 4px 12px;
    background: var(--primary-color);
    color: white;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

/* 의견 내용 영역 */
.opinion-content {
    padding: var(--spacing-lg);
    background: white;
    border-radius: var(--border-radius-sm);
    min-height: 150px;
    font-size: 1rem;
    line-height: 1.8;
    color: var(--text-color);
    white-space: pre-wrap;
    word-wrap: break-word;
}

.opinion-empty {
    color: var(--text-muted);
    text-align: center;
    padding: var(--spacing-xl);
    font-style: italic;
}

/* 의견 푸터 (작성자/작성일) */
.opinion-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    font-size: 0.85rem;
    color: var(--text-muted);
}
```

### 3-6. 빈 상태 스타일

```css
/* 빈 상태 (보고서 없음/선택 안 됨) */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-muted);
    text-align: center;
}

.empty-state-icon {
    font-size: 4rem;
    margin-bottom: var(--spacing-md);
    opacity: 0.3;
}

.empty-state-text {
    font-size: 1.1rem;
    margin-bottom: var(--spacing-sm);
}

.empty-state-subtext {
    font-size: 0.9rem;
    opacity: 0.7;
}
```

### 3-7. 스크롤바 커스터마이징

```css
/* 사이드바 & 메인 콘텐츠 스크롤바 */
.feedback-sidebar::-webkit-scrollbar,
.feedback-content::-webkit-scrollbar {
    width: 8px;
}

.feedback-sidebar::-webkit-scrollbar-track,
.feedback-content::-webkit-scrollbar-track {
    background: var(--bg-secondary);
    border-radius: 4px;
}

.feedback-sidebar::-webkit-scrollbar-thumb,
.feedback-content::-webkit-scrollbar-thumb {
    background: var(--primary-color);
    border-radius: 4px;
}

.feedback-sidebar::-webkit-scrollbar-thumb:hover,
.feedback-content::-webkit-scrollbar-thumb:hover {
    background: var(--primary-dark);
}
```

---

## 4. JavaScript 인터랙션

### 4-1. 초기화 및 상태 관리

```javascript
/**
 * 전역 변수
 */
let allReportsWithFeedback = [];  // 관리자 의견이 있는 보고서 목록
let selectedReportId = null;      // 현재 선택된 보고서 ID
let currentUserName = null;       // 현재 로그인한 사용자 이름

/**
 * 초기화
 */
async function init() {
    console.log('📝 관리자의견 확인 페이지 초기화...');

    // 사용자 정보 가져오기
    const userData = localStorage.getItem('userData');
    if (userData) {
        const user = JSON.parse(userData);
        currentUserName = user.name;
        console.log('현재 사용자:', currentUserName);
    } else {
        console.error('❌ 사용자 정보 없음');
        alert('로그인 정보를 찾을 수 없습니다.');
        return;
    }

    // 데이터 로드
    await loadReportsWithFeedback();
}

// 페이지 로드 시 초기화
document.addEventListener('DOMContentLoaded', () => {
    init();
});
```

### 4-2. 데이터 로드

```javascript
/**
 * 관리자 의견이 있는 보고서 목록 로드
 */
async function loadReportsWithFeedback() {
    try {
        console.log('📋 관리자 의견이 있는 보고서 로드 중...');

        // 본인의 전체 보고서 조회
        const response = await apiManager.getReports({
            employeeName: currentUserName
        });

        console.log('보고서 API 응답:', response);

        let reports = [];
        if (Array.isArray(response)) {
            reports = response;
        } else if (response && Array.isArray(response.data)) {
            reports = response.data;
        } else if (response && response.success && Array.isArray(response.reports)) {
            reports = response.reports;
        }

        // 관리자 의견이 있는 보고서만 필터링
        allReportsWithFeedback = reports.filter(report =>
            report.adminOpinion && report.adminOpinion.trim().length > 0
        );

        console.log(`✅ 관리자 의견이 있는 보고서: ${allReportsWithFeedback.length}건`);

        // UI 렌더링
        renderReportList();

    } catch (error) {
        console.error('❌ 보고서 로드 실패:', error);
        alert('보고서 목록을 불러오는데 실패했습니다.');
    }
}
```

### 4-3. UI 렌더링

```javascript
/**
 * 보고서 리스트 렌더링
 */
function renderReportList() {
    const reportListEl = document.getElementById('reportList');
    const feedbackCountEl = document.getElementById('feedbackCount');

    if (!reportListEl || !feedbackCountEl) {
        console.error('❌ 리스트 요소를 찾을 수 없음');
        return;
    }

    // 카운트 업데이트
    feedbackCountEl.textContent = allReportsWithFeedback.length;

    // 리스트가 비어있는 경우
    if (allReportsWithFeedback.length === 0) {
        reportListEl.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">📭</div>
                <div class="empty-state-text">의견이 작성된 보고서가 없습니다</div>
            </div>
        `;
        return;
    }

    // 날짜순 정렬 (최신순)
    const sortedReports = [...allReportsWithFeedback].sort((a, b) =>
        new Date(b.submittedDate) - new Date(a.submittedDate)
    );

    // 리스트 HTML 생성
    reportListEl.innerHTML = sortedReports.map(report => `
        <div class="report-item ${selectedReportId === report.reportId ? 'active' : ''}"
             onclick="handleReportClick('${report.reportId}')">
            <div class="report-date">📅 ${formatDate(report.submittedDate)}</div>
            <div class="report-company">🏢 ${report.companyName || '회사명 없음'}</div>
            <span class="feedback-badge">💬 의견 확인</span>
        </div>
    `).join('');
}

/**
 * 보고서 상세 렌더링
 */
function renderReportDetail(report) {
    const detailContentEl = document.getElementById('detailContent');

    if (!detailContentEl || !report) {
        console.error('❌ 상세 영역을 찾을 수 없거나 보고서 데이터 없음');
        return;
    }

    // 데이터 파싱
    const activityNotes = parseJSON(report.activityNotes, []);
    const targetProducts = parseJSON(report.targetProducts, []);

    detailContentEl.innerHTML = `
        <!-- 헤더 -->
        <div class="content-header">
            <h2>📋 실적보고서 상세</h2>
            <div class="report-meta">
                <div class="report-meta-item">
                    <span>📅 제출일:</span>
                    <strong>${formatDate(report.submittedDate)}</strong>
                </div>
                <div class="report-meta-item">
                    <span>🏢 거래처:</span>
                    <strong>${report.companyName || '-'}</strong>
                </div>
                <div class="report-meta-item">
                    <span>👤 작성자:</span>
                    <strong>${report.submittedBy || '-'}</strong>
                </div>
            </div>
        </div>

        <!-- 실적 정보 -->
        <div class="report-section">
            <div class="section-title">💰 실적 정보</div>
            <div class="report-grid">
                <div class="report-field">
                    <div class="field-label">목표 수금액</div>
                    <div class="field-value highlight">
                        ${formatCurrency(report.targetCollectionAmount)}
                    </div>
                </div>
                <div class="report-field">
                    <div class="field-label">목표 매출액</div>
                    <div class="field-value highlight">
                        ${formatCurrency(report.targetSalesAmount)}
                    </div>
                </div>
                <div class="report-field">
                    <div class="field-label">목표 상품</div>
                    <div class="field-value">
                        ${targetProducts.length > 0
                            ? targetProducts.map(p => p.productName).join(', ')
                            : '-'}
                    </div>
                </div>
            </div>
        </div>

        <!-- 영업활동 내역 -->
        <div class="report-section">
            <div class="section-title">📝 영업활동 내역</div>
            ${activityNotes.length > 0 ? `
                <div class="activity-list">
                    ${activityNotes.map(activity => `
                        <div class="activity-item">
                            <div class="activity-company">${activity.companyName || '회사명 없음'}</div>
                            <div class="activity-content">${activity.content || '-'}</div>
                        </div>
                    `).join('')}
                </div>
            ` : `
                <div class="opinion-empty">영업활동 내역이 없습니다</div>
            `}
        </div>

        <!-- 관리자 의견 -->
        <div class="admin-opinion-section">
            <div class="opinion-header">
                <h3>💬 관리자 의견</h3>
                <span class="opinion-badge">READ ONLY</span>
            </div>
            <div class="opinion-content">
                ${report.adminOpinion || '의견이 작성되지 않았습니다.'}
            </div>
            <div class="opinion-footer">
                <span>작성자: ${report.adminOpinionBy || '-'}</span>
                <span>작성일: ${report.adminOpinionDate ? formatDate(report.adminOpinionDate) : '-'}</span>
            </div>
        </div>
    `;
}
```

### 4-4. 이벤트 핸들러

```javascript
/**
 * 보고서 클릭 핸들러
 */
window.handleReportClick = function(reportId) {
    console.log('보고서 클릭:', reportId);

    selectedReportId = reportId;
    const report = allReportsWithFeedback.find(r => r.reportId === reportId);

    if (!report) {
        console.error('❌ 보고서를 찾을 수 없음:', reportId);
        return;
    }

    // UI 업데이트
    renderReportList();  // 선택 상태 업데이트
    renderReportDetail(report);
};
```

### 4-5. 유틸리티 함수

```javascript
/**
 * JSON 문자열 파싱 (에러 처리 포함)
 */
function parseJSON(jsonString, defaultValue = null) {
    if (!jsonString) return defaultValue;

    try {
        if (typeof jsonString === 'string') {
            return JSON.parse(jsonString);
        }
        return jsonString;
    } catch (e) {
        console.warn('JSON 파싱 실패:', e);
        return defaultValue;
    }
}

/**
 * 날짜 포맷팅 (YYYY-MM-DD)
 */
function formatDate(dateString) {
    if (!dateString) return '-';

    try {
        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');

        return `${year}-${month}-${day}`;
    } catch (e) {
        console.warn('날짜 파싱 실패:', e);
        return dateString;
    }
}

/**
 * 금액 포맷팅 (천단위 콤마 + 원)
 */
function formatCurrency(amount) {
    if (!amount || amount === 0) return '-';

    try {
        return Number(amount).toLocaleString('ko-KR') + '원';
    } catch (e) {
        console.warn('금액 파싱 실패:', e);
        return amount + '원';
    }
}
```

---

## 5. 컴포넌트별 구현

### 5-1. 보고서 리스트 아이템 컴포넌트

```javascript
/**
 * 보고서 리스트 아이템 클래스
 */
class ReportListItem {
    constructor(report, isActive = false) {
        this.report = report;
        this.isActive = isActive;
    }

    render() {
        return `
            <div class="report-item ${this.isActive ? 'active' : ''}"
                 onclick="handleReportClick('${this.report.reportId}')">
                <div class="report-date">📅 ${formatDate(this.report.submittedDate)}</div>
                <div class="report-company">🏢 ${this.report.companyName || '회사명 없음'}</div>
                <span class="feedback-badge">💬 의견 확인</span>
            </div>
        `;
    }
}
```

### 5-2. 보고서 상세 컴포넌트

```javascript
/**
 * 보고서 상세 뷰 클래스
 */
class ReportDetailView {
    constructor(report) {
        this.report = report;
    }

    render() {
        return `
            ${this.renderHeader()}
            ${this.renderPerformanceInfo()}
            ${this.renderActivityList()}
            ${this.renderAdminOpinion()}
        `;
    }

    renderHeader() {
        return `
            <div class="content-header">
                <h2>📋 실적보고서 상세</h2>
                <div class="report-meta">
                    <div class="report-meta-item">
                        <span>📅 제출일:</span>
                        <strong>${formatDate(this.report.submittedDate)}</strong>
                    </div>
                    <div class="report-meta-item">
                        <span>🏢 거래처:</span>
                        <strong>${this.report.companyName || '-'}</strong>
                    </div>
                    <div class="report-meta-item">
                        <span>👤 작성자:</span>
                        <strong>${this.report.submittedBy || '-'}</strong>
                    </div>
                </div>
            </div>
        `;
    }

    renderPerformanceInfo() {
        const targetProducts = parseJSON(this.report.targetProducts, []);

        return `
            <div class="report-section">
                <div class="section-title">💰 실적 정보</div>
                <div class="report-grid">
                    <div class="report-field">
                        <div class="field-label">목표 수금액</div>
                        <div class="field-value highlight">
                            ${formatCurrency(this.report.targetCollectionAmount)}
                        </div>
                    </div>
                    <div class="report-field">
                        <div class="field-label">목표 매출액</div>
                        <div class="field-value highlight">
                            ${formatCurrency(this.report.targetSalesAmount)}
                        </div>
                    </div>
                    <div class="report-field">
                        <div class="field-label">목표 상품</div>
                        <div class="field-value">
                            ${targetProducts.length > 0
                                ? targetProducts.map(p => p.productName).join(', ')
                                : '-'}
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    renderActivityList() {
        const activityNotes = parseJSON(this.report.activityNotes, []);

        if (activityNotes.length === 0) {
            return `
                <div class="report-section">
                    <div class="section-title">📝 영업활동 내역</div>
                    <div class="opinion-empty">영업활동 내역이 없습니다</div>
                </div>
            `;
        }

        return `
            <div class="report-section">
                <div class="section-title">📝 영업활동 내역</div>
                <div class="activity-list">
                    ${activityNotes.map(activity => `
                        <div class="activity-item">
                            <div class="activity-company">${activity.companyName || '회사명 없음'}</div>
                            <div class="activity-content">${activity.content || '-'}</div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    renderAdminOpinion() {
        return `
            <div class="admin-opinion-section">
                <div class="opinion-header">
                    <h3>💬 관리자 의견</h3>
                    <span class="opinion-badge">READ ONLY</span>
                </div>
                <div class="opinion-content">
                    ${this.report.adminOpinion || '의견이 작성되지 않았습니다.'}
                </div>
                <div class="opinion-footer">
                    <span>작성자: ${this.report.adminOpinionBy || '-'}</span>
                    <span>작성일: ${this.report.adminOpinionDate ? formatDate(this.report.adminOpinionDate) : '-'}</span>
                </div>
            </div>
        `;
    }
}
```

---

## 6. 반응형 디자인

### 6-1. 태블릿 (768px ~ 1024px)

```css
@media (max-width: 1024px) {
    .admin-feedback-container {
        gap: var(--spacing-md);
    }

    .feedback-sidebar {
        flex: 0 0 240px;
        padding: var(--spacing-md);
    }

    .feedback-content {
        padding: var(--spacing-md);
    }

    .report-grid {
        grid-template-columns: 1fr;
    }
}
```

### 6-2. 모바일 (~ 767px)

```css
@media (max-width: 767px) {
    /* 세로 레이아웃으로 전환 */
    .admin-feedback-container {
        flex-direction: column;
        height: auto;
        padding: var(--spacing-sm);
        gap: var(--spacing-sm);
    }

    .feedback-sidebar {
        flex: 0 0 auto;
        max-height: 300px;
        padding: var(--spacing-md);
    }

    .feedback-content {
        flex: 1;
        padding: var(--spacing-md);
    }

    .content-header h2 {
        font-size: 1.2rem;
    }

    .report-meta {
        flex-direction: column;
        gap: var(--spacing-sm);
    }

    .report-grid {
        grid-template-columns: 1fr;
    }

    .section-title {
        font-size: 1rem;
    }

    .opinion-header h3 {
        font-size: 1rem;
    }
}
```

---

## 7. 접근성 고려사항

### 7-1. ARIA 속성

```html
<!-- 사이드바 -->
<aside class="feedback-sidebar" role="complementary" aria-label="보고서 목록">
    <div class="sidebar-header">
        <h3 id="sidebar-title">💬 관리자 의견</h3>
        <span class="feedback-count" aria-label="의견이 있는 보고서 개수">3</span>
    </div>

    <div class="report-list" role="list" aria-labelledby="sidebar-title">
        <div class="report-item" role="listitem" tabindex="0"
             aria-label="2025년 10월 8일 테크이노베이션 보고서">
            <!-- 내용 -->
        </div>
    </div>
</aside>

<!-- 메인 콘텐츠 -->
<main class="feedback-content" role="main" aria-label="보고서 상세 내용">
    <div class="admin-opinion-section" role="region" aria-labelledby="opinion-title">
        <h3 id="opinion-title">💬 관리자 의견</h3>
        <div class="opinion-content" role="article" aria-readonly="true">
            <!-- 의견 내용 -->
        </div>
    </div>
</main>
```

### 7-2. 키보드 네비게이션

```javascript
// 보고서 아이템에 키보드 이벤트 추가
document.querySelectorAll('.report-item').forEach(item => {
    item.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            item.click();
        }
    });
});

// 화살표 키로 리스트 탐색
document.getElementById('reportList').addEventListener('keydown', (e) => {
    const items = Array.from(document.querySelectorAll('.report-item'));
    const currentIndex = items.findIndex(item => item === document.activeElement);

    if (e.key === 'ArrowDown') {
        e.preventDefault();
        const nextIndex = (currentIndex + 1) % items.length;
        items[nextIndex].focus();
    } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        const prevIndex = (currentIndex - 1 + items.length) % items.length;
        items[prevIndex].focus();
    }
});
```

### 7-3. 스크린 리더 지원

```javascript
/**
 * 스크린 리더 알림
 */
function announceToScreenReader(message) {
    const announcement = document.createElement('div');
    announcement.setAttribute('role', 'status');
    announcement.setAttribute('aria-live', 'polite');
    announcement.className = 'sr-only';
    announcement.textContent = message;

    document.body.appendChild(announcement);

    setTimeout(() => {
        announcement.remove();
    }, 1000);
}

// 사용 예시
function handleReportClick(reportId) {
    // ... 기존 코드 ...

    // 스크린 리더에 알림
    const report = allReportsWithFeedback.find(r => r.reportId === reportId);
    if (report) {
        announceToScreenReader(
            `${report.companyName} 보고서 상세가 표시되었습니다.`
        );
    }
}
```

```css
/* 스크린 리더 전용 텍스트 */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}
```

---

## 8. 데이터 흐름

### 8-1. 데이터 흐름도

```
┌─────────────────┐
│  영업담당 로그인 │
└────────┬────────┘
         │
         ▼
┌─────────────────────────────┐
│ 1. 사용자 정보 확인          │
│    - localStorage에서 조회   │
│    - currentUserName 설정    │
└────────┬────────────────────┘
         │
         ▼
┌─────────────────────────────────────┐
│ 2. 본인 보고서 조회                  │
│    GET /api/reports?employeeName=강민 │
└────────┬────────────────────────────┘
         │
         ▼
┌──────────────────────────────────────┐
│ 3. 관리자 의견 필터링                 │
│    - adminOpinion 필드 존재 확인      │
│    - 빈 문자열 제외                   │
└────────┬─────────────────────────────┘
         │
         ▼
┌──────────────────────────┐
│ 4. 리스트 렌더링          │
│    - 날짜순 정렬 (최신순) │
│    - 사이드바에 표시      │
└────────┬─────────────────┘
         │
         ▼
┌─────────────────────────┐
│ 5. 보고서 선택 (클릭)    │
└────────┬────────────────┘
         │
         ▼
┌──────────────────────────────────┐
│ 6. 상세 렌더링                    │
│    - 보고서 정보 표시             │
│    - 실적 데이터 파싱 및 포맷팅   │
│    - 영업활동 JSON 파싱           │
│    - 관리자 의견 강조 표시        │
└───────────────────────────────────┘
```

### 8-2. API 엔드포인트

```javascript
// 보고서 조회 API
GET /api/reports?employeeName={사용자명}

// 응답 형식
{
    "success": true,
    "data": [
        {
            "reportId": "uuid",
            "reportType": "weekly",
            "companyId": 123,
            "companyName": "(주)테크이노베이션",
            "submittedBy": "강민",
            "submittedDate": "2025-10-08",
            "status": "confirmed",
            "targetCollectionAmount": 5000000,
            "targetSalesAmount": 10000000,
            "targetProducts": "[{\"productName\":\"스마트센서\"}]",
            "activityNotes": "[{\"companyName\":\"테크\",\"content\":\"시연완료\"}]",
            "adminOpinion": "수고하셨습니다...",
            "adminOpinionBy": "강정환",
            "adminOpinionDate": "2025-10-08"
        }
    ]
}
```

### 8-3. 데이터베이스 스키마

```sql
-- reports 테이블
CREATE TABLE reports (
    reportId VARCHAR(36) PRIMARY KEY,
    reportType VARCHAR(20),
    companyId INT,
    submittedBy VARCHAR(50),
    submittedDate DATE,
    status VARCHAR(20),
    targetCollectionAmount DECIMAL(15,2),
    targetSalesAmount DECIMAL(15,2),
    targetProducts TEXT,
    activityNotes TEXT,
    adminOpinion TEXT,              -- 관리자 의견
    adminOpinionBy VARCHAR(50),     -- 의견 작성자
    adminOpinionDate DATETIME,      -- 의견 작성일
    createdAt DATETIME,
    updatedAt DATETIME
);
```

---

## 9. 구현 체크리스트

### Phase 1: 기본 구조
- [x] HTML 마크업 작성 (2열 레이아웃)
- [x] CSS 기본 스타일 적용
- [x] 사이드바 및 메인 콘텐츠 영역 구분

### Phase 2: 데이터 로드
- [x] 사용자 정보 확인
- [x] 본인 보고서 조회 API 연동
- [x] 관리자 의견 필터링 로직

### Phase 3: UI 렌더링
- [x] 보고서 리스트 렌더링
- [x] 빈 상태 UI 처리
- [x] 보고서 상세 렌더링
- [x] 관리자 의견 강조 표시

### Phase 4: 인터랙션
- [x] 보고서 선택 기능
- [x] 활성 상태 표시
- [x] JSON 데이터 파싱

### Phase 5: 반응형 및 접근성
- [x] 반응형 디자인 적용
- [x] 키보드 네비게이션
- [x] ARIA 속성 추가
- [x] 스크린 리더 지원

### Phase 6: 최종 테스트
- [ ] 다양한 브라우저 테스트
- [ ] 모바일 기기 테스트
- [ ] 사용자 피드백 수집

---

## 참고 자료

- [MDN Web Docs - Flexbox](https://developer.mozilla.org/ko/docs/Web/CSS/CSS_Flexible_Box_Layout)
- [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/WCAG21/quickref/)
- [CSS Tricks - Glassmorphism](https://css-tricks.com/glassmorphism/)
- [관련 문서: 05_실적보고서_작성_UI_구현가이드.md](./05_실적보고서_작성_UI_구현가이드.md)

---

**작성 완료일**: 2025-10-08
**최종 수정일**: 2025-10-08
